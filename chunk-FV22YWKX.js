import{a as q}from"./chunk-CT67W7SA.js";import{$ as g,A as s,D as h,H as d,J as z,L as k,M as f,O as u,R as S,S as T,T as o,U as i,V as w,W as b,X as x,Y as l,Z as r,_ as m,aa as Q,fa as M,ha as E,n as P,oa as y,p as _,q as p,qa as R,r as O,s as v,w as C}from"./chunk-PYF3QQPI.js";var V=(n,t)=>t.questionId;function D(n,t){n&1&&(o(0,"div",5),r(1,"\u{1F389}"),i())}function L(n,t){n&1&&(o(0,"div",6),r(1,"\u{1F4DA}"),i())}function F(n,t){n&1&&r(0," Congratulations! ")}function $(n,t){n&1&&r(0," Keep Learning! ")}function j(n,t){n&1&&r(0," You've successfully passed the quiz! ")}function N(n,t){if(n&1&&r(0),n&2){let e=l();g(" You need ",e.passingScore,"% to pass. Keep practicing and try again! ")}}function Y(n,t){if(n&1&&(o(0,"div",17)(1,"span",18),r(2,"Time Taken"),i(),o(3,"span",19),r(4),i()()),n&2){let e=l(),a=l();s(4),m(e.timeTaken?a.formatTimeTaken(e.timeTaken):"N/A")}}function B(n,t){if(n&1){let e=b();o(0,"button",28),x("click",function(){_(e);let c=l(2);return p(c.retakeQuiz())}),r(1," Retake Quiz "),i()}}function H(n,t){if(n&1){let e=b();o(0,"button",28),x("click",function(){_(e);let c=l(2);return p(c.continueToCourses())}),r(1," Continue Learning "),i()}}function K(n,t){n&1&&r(0," Hide Answers ")}function G(n,t){n&1&&r(0," Show Detailed Answers ")}function W(n,t){n&1&&r(0," \u2713 Correct ")}function J(n,t){n&1&&r(0," \u2717 Incorrect ")}function U(n,t){if(n&1&&(o(0,"div",37)(1,"span",38),r(2,"Correct Answer:"),i(),o(3,"span",41),r(4),i()()),n&2){let e=l().$implicit,a=l(3);s(4),g(" ",a.formatAnswer(e.correctAnswer)," ")}}function X(n,t){if(n&1&&(o(0,"div",40)(1,"strong"),r(2,"Explanation:"),i(),o(3,"p"),r(4),i()()),n&2){let e=l().$implicit;s(4),m(e.explanation)}}function Z(n,t){if(n&1&&(o(0,"div",30)(1,"div",31)(2,"span",32),r(3),i(),o(4,"span",33),r(5),i(),o(6,"span",34),d(7,W,1,0)(8,J,1,0),i()(),o(9,"h3",35),r(10),i(),o(11,"div",36)(12,"div",37)(13,"span",38),r(14,"Your Answer:"),i(),o(15,"span",39),r(16),i()(),d(17,U,5,1,"div",37),i(),d(18,X,5,1,"div",40),i()),n&2){let e=t.$implicit,a=t.$index,c=l(3);f("correct",e.isCorrect)("incorrect",!e.isCorrect),s(3),g("Question ",a+1,""),s(2),Q(" ",e.earnedPoints," / ",e.points," points "),s(),f("correct",e.isCorrect),s(),u(e.isCorrect?7:8),s(3),m(e.question),s(5),f("wrong",!e.isCorrect),s(),g(" ",c.formatAnswer(e.userAnswer)," "),s(),u(e.isCorrect?-1:17),s(),u(e.explanation?18:-1)}}function ee(n,t){if(n&1&&(o(0,"div",27)(1,"h2"),r(2,"Detailed Answers"),i(),S(3,Z,19,16,"div",29,V),i()),n&2){let e=l();s(3),T(e.questionResults)}}function te(n,t){if(n&1){let e=b();o(0,"div",1)(1,"div",3)(2,"div",4),d(3,D,2,0,"div",5)(4,L,2,0,"div",6),i(),o(5,"h1"),d(6,F,1,0)(7,$,1,0),i(),o(8,"p",7),d(9,j,1,0)(10,N,1,1),i()(),o(11,"div",8)(12,"div",9),O(),o(13,"svg",10),w(14,"circle",11)(15,"circle",12),i(),v(),o(16,"div",13)(17,"span",14),r(18),i(),o(19,"span",15),r(20,"Score"),i()()(),o(21,"div",16)(22,"div",17)(23,"span",18),r(24,"Total Questions"),i(),o(25,"span",19),r(26),i()(),o(27,"div",20)(28,"span",18),r(29,"Correct"),i(),o(30,"span",19),r(31),i()(),o(32,"div",21)(33,"span",18),r(34,"Wrong"),i(),o(35,"span",19),r(36),i()(),d(37,Y,5,1,"div",17),i()(),o(38,"div",22)(39,"button",23),x("click",function(){_(e);let c=l();return p(c.backToCourse())}),r(40," Back to Course "),i(),d(41,B,2,0,"button",24)(42,H,2,0,"button",24),i(),o(43,"div",25)(44,"button",26),x("click",function(){_(e);let c=l();return p(c.toggleAnswers())}),d(45,K,1,0)(46,G,1,0),i()(),d(47,ee,5,0,"div",27),i()}if(n&2){let e=t,a=l();s(),f("passed",a.passed())("failed",!a.passed()),s(2),u(a.passed()?3:4),s(3),u(a.passed()?6:7),s(3),u(a.passed()?9:10),s(6),k("stroke-dasharray",340)("stroke-dashoffset",340-340*a.scorePercentage()/100),z("stroke",a.scoreColor()),s(3),g("",a.scorePercentage(),"%"),s(8),m(e.totalQuestions),s(5),m(e.correctAnswers),s(5),m(e.wrongAnswers),s(),u(e.timeTaken?37:-1),s(4),u(a.passed()?42:41),s(4),u(a.showAnswers()?45:46),s(2),u(a.showAnswers()?47:-1)}}function ne(n,t){n&1&&(o(0,"div",2),w(1,"div",42),o(2,"p"),r(3,"Loading results..."),i()())}var A=class n{router=P(R);route=P(y);quizService=P(q);courseId=C("");quiz=C(null);result=C(null);showAnswers=C(!1);passed=M(()=>this.result()?.passed||!1);scorePercentage=M(()=>this.result()?.score||0);scoreColor=M(()=>{let t=this.scorePercentage();return t>=90?"#48bb78":t>=70?"#667eea":t>=50?"#ed8936":"#e53e3e"});ngOnInit(){this.route.paramMap.subscribe(e=>{let a=e.get("courseId");a&&(this.courseId.set(a),this.loadQuiz(a))});let t=this.router.getCurrentNavigation();t?.extras.state?.result?this.result.set(t.extras.state.result):this.loadLatestResult()}loadQuiz(t){let e=this.quizService.getQuizByCourseId(t);e&&this.quiz.set(e)}loadLatestResult(){let t=this.quiz();if(!t)return;let e=this.quizService.getLatestAttempt(t.id);if(e&&e.completedAt){let a=this.quizService.calculateQuizScore(t,e.answers);this.result.set(a)}else this.router.navigate(["/courses",this.courseId()])}toggleAnswers(){this.showAnswers.update(t=>!t)}retakeQuiz(){this.router.navigate(["/courses",this.courseId(),"quiz"])}backToCourse(){this.router.navigate(["/courses",this.courseId()])}continueToCourses(){this.router.navigate(["/courses"])}getAnswerLabel(t){return String.fromCharCode(65+t)}getAnswerText(t,e){let a=this.quiz();if(!a)return"";let c=a.questions.find(I=>I.id===t.questionId);return c?c.type==="true-false"?e.toString():c.options?.[e]||"":""}formatAnswer(t){return typeof t=="number"?this.getAnswerLabel(t):t==="true"?"True":"False"}formatTimeTaken(t){let e=Math.floor(t/60),a=t%60;return`${e}m ${a}s`}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=h({type:n,selectors:[["app-quiz-result"]],decls:3,vars:1,consts:[[1,"result-container"],[1,"result-wrapper"],[1,"loading-state"],[1,"result-header"],[1,"result-icon"],[1,"success-icon"],[1,"fail-icon"],[1,"result-message"],[1,"score-card"],[1,"score-circle"],["viewBox","0 0 120 120",1,"progress-ring"],["cx","60","cy","60","r","54","fill","none","stroke","#e2e8f0","stroke-width","12"],["cx","60","cy","60","r","54","fill","none","stroke-width","12","stroke-linecap","round","transform","rotate(-90 60 60)"],[1,"score-text"],[1,"score-value"],[1,"score-label"],[1,"score-details"],[1,"detail-item"],[1,"detail-label"],[1,"detail-value"],[1,"detail-item","success"],[1,"detail-item","error"],[1,"action-buttons"],[1,"btn","btn-secondary",3,"click"],[1,"btn","btn-primary"],[1,"answers-toggle"],[1,"toggle-btn",3,"click"],[1,"answers-section"],[1,"btn","btn-primary",3,"click"],[1,"answer-card",3,"correct","incorrect"],[1,"answer-card"],[1,"answer-header"],[1,"question-number"],[1,"points-earned"],[1,"result-badge"],[1,"question"],[1,"answer-comparison"],[1,"answer-item"],[1,"answer-label"],[1,"answer-value"],[1,"explanation"],[1,"answer-value","correct"],[1,"spinner"]],template:function(e,a){if(e&1&&(o(0,"div",0),d(1,te,48,20,"div",1)(2,ne,4,0,"div",2),i()),e&2){let c;s(),u((c=a.result())?1:2,c)}},dependencies:[E],styles:[".result-container[_ngcontent-%COMP%]{min-height:100vh;background:linear-gradient(135deg,#667eea,#764ba2);padding:2rem}.loading-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:60vh;color:#fff}.spinner[_ngcontent-%COMP%]{width:48px;height:48px;border:4px solid rgba(255,255,255,.3);border-top-color:#fff;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.result-wrapper[_ngcontent-%COMP%]{max-width:900px;margin:0 auto}.result-header[_ngcontent-%COMP%]{background:#fff;padding:3rem 2rem;border-radius:12px 12px 0 0;text-align:center}.result-header.passed[_ngcontent-%COMP%]{background:linear-gradient(135deg,#c6f6d5,#9ae6b4)}.result-header.failed[_ngcontent-%COMP%]{background:linear-gradient(135deg,#fed7d7,#feb2b2)}.result-header[_ngcontent-%COMP%]   .result-icon[_ngcontent-%COMP%]{font-size:4rem;margin-bottom:1rem}.result-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0 0 .5rem;color:#1a202c;font-size:2.5rem}.result-header[_ngcontent-%COMP%]   .result-message[_ngcontent-%COMP%]{color:#2d3748;font-size:1.125rem;margin:0}.score-card[_ngcontent-%COMP%]{background:#fff;padding:3rem 2rem;border-radius:0 0 12px 12px;margin-bottom:1.5rem;box-shadow:0 4px 6px #0000001a}.score-circle[_ngcontent-%COMP%]{position:relative;width:180px;height:180px;margin:0 auto 2rem}.score-circle[_ngcontent-%COMP%]   .progress-ring[_ngcontent-%COMP%]{transform:rotate(-90deg)}.score-circle[_ngcontent-%COMP%]   .score-text[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);text-align:center}.score-circle[_ngcontent-%COMP%]   .score-text[_ngcontent-%COMP%]   .score-value[_ngcontent-%COMP%]{display:block;font-size:2.5rem;font-weight:700;color:#1a202c}.score-circle[_ngcontent-%COMP%]   .score-text[_ngcontent-%COMP%]   .score-label[_ngcontent-%COMP%]{display:block;font-size:.875rem;color:#718096;text-transform:uppercase;font-weight:600;letter-spacing:.05em}.score-details[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(150px,1fr));gap:1.5rem}.score-details[_ngcontent-%COMP%]   .detail-item[_ngcontent-%COMP%]{text-align:center;padding:1rem;background:#f7fafc;border-radius:8px}.score-details[_ngcontent-%COMP%]   .detail-item.success[_ngcontent-%COMP%]{background:#c6f6d5}.score-details[_ngcontent-%COMP%]   .detail-item.success[_ngcontent-%COMP%]   .detail-value[_ngcontent-%COMP%]{color:#22543d}.score-details[_ngcontent-%COMP%]   .detail-item.error[_ngcontent-%COMP%]{background:#fed7d7}.score-details[_ngcontent-%COMP%]   .detail-item.error[_ngcontent-%COMP%]   .detail-value[_ngcontent-%COMP%]{color:#742a2a}.score-details[_ngcontent-%COMP%]   .detail-item[_ngcontent-%COMP%]   .detail-label[_ngcontent-%COMP%]{display:block;font-size:.875rem;color:#718096;margin-bottom:.5rem;font-weight:500}.score-details[_ngcontent-%COMP%]   .detail-item[_ngcontent-%COMP%]   .detail-value[_ngcontent-%COMP%]{display:block;font-size:1.75rem;font-weight:700;color:#1a202c}.action-buttons[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:1rem;margin-bottom:1.5rem}.answers-toggle[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-bottom:1.5rem}.answers-toggle[_ngcontent-%COMP%]   .toggle-btn[_ngcontent-%COMP%]{padding:.75rem 1.5rem;background:#fff;color:#667eea;border:2px solid white;border-radius:8px;font-weight:600;cursor:pointer;transition:all .2s}.answers-toggle[_ngcontent-%COMP%]   .toggle-btn[_ngcontent-%COMP%]:hover{background:#f7fafc}.btn[_ngcontent-%COMP%]{padding:.875rem 2rem;border-radius:8px;font-weight:600;font-size:1rem;cursor:pointer;transition:all .2s;border:none}.btn.btn-primary[_ngcontent-%COMP%]{background:#667eea;color:#fff}.btn.btn-primary[_ngcontent-%COMP%]:hover{background:#5a67d8;transform:translateY(-2px)}.btn.btn-secondary[_ngcontent-%COMP%]{background:#fff;color:#4a5568;border:2px solid white}.btn.btn-secondary[_ngcontent-%COMP%]:hover{background:#f7fafc}.answers-section[_ngcontent-%COMP%]{background:#fff;padding:2rem;border-radius:12px;box-shadow:0 4px 6px #0000001a}.answers-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0 0 1.5rem;color:#1a202c;font-size:1.5rem}.answer-card[_ngcontent-%COMP%]{background:#f7fafc;border:2px solid #e2e8f0;border-radius:12px;padding:1.5rem;margin-bottom:1.5rem}.answer-card.correct[_ngcontent-%COMP%]{background:#f0fff4;border-color:#9ae6b4}.answer-card.incorrect[_ngcontent-%COMP%]{background:#fff5f5;border-color:#feb2b2}.answer-card[_ngcontent-%COMP%]   .answer-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;margin-bottom:1rem;flex-wrap:wrap}.answer-card[_ngcontent-%COMP%]   .answer-header[_ngcontent-%COMP%]   .question-number[_ngcontent-%COMP%]{color:#667eea;font-weight:600;font-size:.875rem;text-transform:uppercase}.answer-card[_ngcontent-%COMP%]   .answer-header[_ngcontent-%COMP%]   .points-earned[_ngcontent-%COMP%]{color:#4a5568;font-size:.875rem;font-weight:600}.answer-card[_ngcontent-%COMP%]   .answer-header[_ngcontent-%COMP%]   .result-badge[_ngcontent-%COMP%]{margin-left:auto;padding:.25rem .75rem;border-radius:12px;font-size:.875rem;font-weight:600}.answer-card[_ngcontent-%COMP%]   .answer-header[_ngcontent-%COMP%]   .result-badge.correct[_ngcontent-%COMP%]{background:#c6f6d5;color:#22543d}.answer-card[_ngcontent-%COMP%]   .answer-header[_ngcontent-%COMP%]   .result-badge[_ngcontent-%COMP%]:not(.correct){background:#fed7d7;color:#742a2a}.answer-card[_ngcontent-%COMP%]   .question[_ngcontent-%COMP%]{font-size:1.125rem;color:#1a202c;margin:0 0 1.5rem;line-height:1.6}.answer-card[_ngcontent-%COMP%]   .answer-comparison[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem;margin-bottom:1rem}.answer-card[_ngcontent-%COMP%]   .answer-item[_ngcontent-%COMP%]{display:flex;gap:1rem;align-items:center}.answer-card[_ngcontent-%COMP%]   .answer-item[_ngcontent-%COMP%]   .answer-label[_ngcontent-%COMP%]{font-weight:600;color:#4a5568;min-width:120px}.answer-card[_ngcontent-%COMP%]   .answer-item[_ngcontent-%COMP%]   .answer-value[_ngcontent-%COMP%]{padding:.5rem 1rem;border-radius:6px;font-weight:600}.answer-card[_ngcontent-%COMP%]   .answer-item[_ngcontent-%COMP%]   .answer-value.correct[_ngcontent-%COMP%]{background:#c6f6d5;color:#22543d}.answer-card[_ngcontent-%COMP%]   .answer-item[_ngcontent-%COMP%]   .answer-value.wrong[_ngcontent-%COMP%]{background:#fed7d7;color:#742a2a}.answer-card[_ngcontent-%COMP%]   .explanation[_ngcontent-%COMP%]{background:#fff;padding:1rem;border-radius:8px;border-left:4px solid #667eea;margin-top:1rem}.answer-card[_ngcontent-%COMP%]   .explanation[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#667eea;display:block;margin-bottom:.5rem}.answer-card[_ngcontent-%COMP%]   .explanation[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#4a5568;line-height:1.6}@media (max-width: 768px){.result-container[_ngcontent-%COMP%]{padding:1rem}.result-header[_ngcontent-%COMP%]{padding:2rem 1.5rem}.result-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem}.score-card[_ngcontent-%COMP%]{padding:2rem 1.5rem}.score-details[_ngcontent-%COMP%]{grid-template-columns:1fr 1fr}.action-buttons[_ngcontent-%COMP%]{flex-direction:column}.action-buttons[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{width:100%}.answers-section[_ngcontent-%COMP%]{padding:1.5rem}.answer-card[_ngcontent-%COMP%]{padding:1rem}.answer-card[_ngcontent-%COMP%]   .answer-item[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:.5rem}.answer-card[_ngcontent-%COMP%]   .answer-item[_ngcontent-%COMP%]   .answer-label[_ngcontent-%COMP%]{min-width:auto}}"]})};export{A as QuizResultComponent};
